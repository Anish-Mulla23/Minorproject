{"ast":null,"code":"const fetchWishlist = useCallback(async () => {\n  try {\n    var _response$data;\n    setLoading(true);\n    setError(\"\");\n    console.log(\"Fetching wishlist...\");\n    const token = localStorage.getItem(\"token\");\n    console.log(\"Token retrieved:\", token ? \"exists\" : \"not found\");\n    if (!token) {\n      console.log(\"No token found, redirecting to login\");\n      setError(\"You must be logged in to view your wishlist.\");\n      setLoading(false);\n      navigate(\"/login\");\n      return;\n    }\n    const response = await axios.get(\"http://localhost:5000/api/wishlist/\", {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n    console.log(\"Wishlist API response:\", response.data);\n    const productItems = ((_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.wishlist) || [];\n    console.log(\"Products in wishlist:\", productItems);\n    if (!Array.isArray(productItems)) {\n      throw new Error(\"Invalid wishlist data received.\");\n    }\n    if (productItems.length === 0) {\n      console.log(\"Wishlist is empty\");\n      setWishlistProducts([]);\n      setLoading(false);\n      return;\n    }\n\n    // Directly use the products returned from the wishlist API\n    const productsWithWishlistFlag = productItems.map(item => ({\n      ...item,\n      inWishlist: true\n    }));\n    console.log(\"Products with wishlist flag:\", productsWithWishlistFlag);\n    setWishlistProducts(productsWithWishlistFlag);\n  } catch (err) {\n    console.error(\"Error fetching wishlist:\", err);\n    if (axios.isAxiosError(err)) {\n      var _err$response, _err$response$data, _err$response2, _err$response3, _err$response4;\n      const errorMessage = ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || ((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.statusText) || \"Failed to fetch wishlist. Server error.\";\n      console.error(\"Axios error details:\", {\n        status: (_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : _err$response3.status,\n        data: (_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : _err$response4.data\n      });\n      setError(errorMessage);\n    } else {\n      setError(err.message || \"An unexpected error occurred. Please try again.\");\n    }\n  } finally {\n    setLoading(false);\n  }\n}, [navigate]);","map":{"version":3,"names":["fetchWishlist","useCallback","_response$data","setLoading","setError","console","log","token","localStorage","getItem","navigate","response","axios","get","headers","Authorization","data","productItems","wishlist","Array","isArray","Error","length","setWishlistProducts","productsWithWishlistFlag","map","item","inWishlist","err","error","isAxiosError","_err$response","_err$response$data","_err$response2","_err$response3","_err$response4","errorMessage","message","statusText","status"],"sources":["E:/10000/10002/frontend/src/Wishlist.js"],"sourcesContent":["const fetchWishlist = useCallback(async () => {\r\n  try {\r\n    setLoading(true);\r\n    setError(\"\");\r\n    console.log(\"Fetching wishlist...\");\r\n\r\n    const token = localStorage.getItem(\"token\");\r\n    console.log(\"Token retrieved:\", token ? \"exists\" : \"not found\");\r\n\r\n    if (!token) {\r\n      console.log(\"No token found, redirecting to login\");\r\n      setError(\"You must be logged in to view your wishlist.\");\r\n      setLoading(false);\r\n      navigate(\"/login\");\r\n      return;\r\n    }\r\n\r\n    const response = await axios.get(\"http://localhost:5000/api/wishlist/\", {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    });\r\n    console.log(\"Wishlist API response:\", response.data);\r\n\r\n    const productItems = response.data?.wishlist || [];\r\n    console.log(\"Products in wishlist:\", productItems);\r\n\r\n    if (!Array.isArray(productItems)) {\r\n      throw new Error(\"Invalid wishlist data received.\");\r\n    }\r\n\r\n    if (productItems.length === 0) {\r\n      console.log(\"Wishlist is empty\");\r\n      setWishlistProducts([]);\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    // Directly use the products returned from the wishlist API\r\n    const productsWithWishlistFlag = productItems.map((item) => ({\r\n      ...item,\r\n      inWishlist: true,\r\n    }));\r\n\r\n    console.log(\"Products with wishlist flag:\", productsWithWishlistFlag);\r\n    setWishlistProducts(productsWithWishlistFlag);\r\n  } catch (err) {\r\n    console.error(\"Error fetching wishlist:\", err);\r\n    if (axios.isAxiosError(err)) {\r\n      const errorMessage =\r\n        err.response?.data?.message ||\r\n        err.response?.statusText ||\r\n        \"Failed to fetch wishlist. Server error.\";\r\n      console.error(\"Axios error details:\", {\r\n        status: err.response?.status,\r\n        data: err.response?.data,\r\n      });\r\n      setError(errorMessage);\r\n    } else {\r\n      setError(\r\n        err.message || \"An unexpected error occurred. Please try again.\"\r\n      );\r\n    }\r\n  } finally {\r\n    setLoading(false);\r\n  }\r\n}, [navigate]);\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}