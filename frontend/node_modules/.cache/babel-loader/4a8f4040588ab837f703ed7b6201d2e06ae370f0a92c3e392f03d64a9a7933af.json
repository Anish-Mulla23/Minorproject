{"ast":null,"code":"const toggleWishlist = async productId => {\n  if (!token) {\n    console.log(\"Please login to manage your wishlist.\");\n    return;\n  }\n  try {\n    // Determine the new status (opposite of current)\n    const newStatus = !wishlistStatus[productId];\n\n    // Optimistic UI update\n    setWishlistStatus(prev => ({\n      ...prev,\n      [productId]: newStatus\n    }));\n\n    // Update wishlist array\n    if (newStatus) {\n      setWishlist(prev => [...prev, productId]);\n    } else {\n      setWishlist(prev => prev.filter(id => id !== productId));\n    }\n\n    // API call\n    const endpoint = newStatus ? \"http://localhost:5000/api/wishlist\" : \"http://localhost:5000/api/wishlist/remove\";\n    const response = await axios.put(endpoint, {\n      productId\n    }, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n\n    // Update state with the response data to ensure sync with backend\n    if (response.data.wishlist) {\n      setWishlist(response.data.wishlist);\n      const updatedStatus = {};\n      response.data.wishlist.forEach(id => {\n        updatedStatus[id] = true;\n      });\n      setWishlistStatus(updatedStatus);\n    }\n  } catch (err) {\n    console.error(\"Error updating wishlist:\", err);\n    // Revert on error\n    setWishlistStatus(prev => ({\n      ...prev,\n      [productId]: !prev[productId]\n    }));\n  }\n};","map":{"version":3,"names":["toggleWishlist","productId","token","console","log","newStatus","wishlistStatus","setWishlistStatus","prev","setWishlist","filter","id","endpoint","response","axios","put","headers","Authorization","data","wishlist","updatedStatus","forEach","err","error"],"sources":["E:/10000/10002/frontend/src/components/ProductDashboard.jsx"],"sourcesContent":["const toggleWishlist = async (productId) => {\r\n  if (!token) {\r\n    console.log(\"Please login to manage your wishlist.\");\r\n    return;\r\n  }\r\n\r\n  try {\r\n    // Determine the new status (opposite of current)\r\n    const newStatus = !wishlistStatus[productId];\r\n\r\n    // Optimistic UI update\r\n    setWishlistStatus((prev) => ({\r\n      ...prev,\r\n      [productId]: newStatus,\r\n    }));\r\n\r\n    // Update wishlist array\r\n    if (newStatus) {\r\n      setWishlist((prev) => [...prev, productId]);\r\n    } else {\r\n      setWishlist((prev) => prev.filter((id) => id !== productId));\r\n    }\r\n\r\n    // API call\r\n    const endpoint = newStatus\r\n      ? \"http://localhost:5000/api/wishlist\"\r\n      : \"http://localhost:5000/api/wishlist/remove\";\r\n\r\n    const response = await axios.put(\r\n      endpoint,\r\n      { productId },\r\n      {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      }\r\n    );\r\n\r\n    // Update state with the response data to ensure sync with backend\r\n    if (response.data.wishlist) {\r\n      setWishlist(response.data.wishlist);\r\n      const updatedStatus = {};\r\n      response.data.wishlist.forEach((id) => {\r\n        updatedStatus[id] = true;\r\n      });\r\n      setWishlistStatus(updatedStatus);\r\n    }\r\n  } catch (err) {\r\n    console.error(\"Error updating wishlist:\", err);\r\n    // Revert on error\r\n    setWishlistStatus((prev) => ({\r\n      ...prev,\r\n      [productId]: !prev[productId],\r\n    }));\r\n  }\r\n};\r\n"],"mappings":"AAAA,MAAMA,cAAc,GAAG,MAAOC,SAAS,IAAK;EAC1C,IAAI,CAACC,KAAK,EAAE;IACVC,OAAO,CAACC,GAAG,CAAC,uCAAuC,CAAC;IACpD;EACF;EAEA,IAAI;IACF;IACA,MAAMC,SAAS,GAAG,CAACC,cAAc,CAACL,SAAS,CAAC;;IAE5C;IACAM,iBAAiB,CAAEC,IAAI,KAAM;MAC3B,GAAGA,IAAI;MACP,CAACP,SAAS,GAAGI;IACf,CAAC,CAAC,CAAC;;IAEH;IACA,IAAIA,SAAS,EAAE;MACbI,WAAW,CAAED,IAAI,IAAK,CAAC,GAAGA,IAAI,EAAEP,SAAS,CAAC,CAAC;IAC7C,CAAC,MAAM;MACLQ,WAAW,CAAED,IAAI,IAAKA,IAAI,CAACE,MAAM,CAAEC,EAAE,IAAKA,EAAE,KAAKV,SAAS,CAAC,CAAC;IAC9D;;IAEA;IACA,MAAMW,QAAQ,GAAGP,SAAS,GACtB,oCAAoC,GACpC,2CAA2C;IAE/C,MAAMQ,QAAQ,GAAG,MAAMC,KAAK,CAACC,GAAG,CAC9BH,QAAQ,EACR;MAAEX;IAAU,CAAC,EACb;MACEe,OAAO,EAAE;QACPC,aAAa,EAAE,UAAUf,KAAK;MAChC;IACF,CACF,CAAC;;IAED;IACA,IAAIW,QAAQ,CAACK,IAAI,CAACC,QAAQ,EAAE;MAC1BV,WAAW,CAACI,QAAQ,CAACK,IAAI,CAACC,QAAQ,CAAC;MACnC,MAAMC,aAAa,GAAG,CAAC,CAAC;MACxBP,QAAQ,CAACK,IAAI,CAACC,QAAQ,CAACE,OAAO,CAAEV,EAAE,IAAK;QACrCS,aAAa,CAACT,EAAE,CAAC,GAAG,IAAI;MAC1B,CAAC,CAAC;MACFJ,iBAAiB,CAACa,aAAa,CAAC;IAClC;EACF,CAAC,CAAC,OAAOE,GAAG,EAAE;IACZnB,OAAO,CAACoB,KAAK,CAAC,0BAA0B,EAAED,GAAG,CAAC;IAC9C;IACAf,iBAAiB,CAAEC,IAAI,KAAM;MAC3B,GAAGA,IAAI;MACP,CAACP,SAAS,GAAG,CAACO,IAAI,CAACP,SAAS;IAC9B,CAAC,CAAC,CAAC;EACL;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}